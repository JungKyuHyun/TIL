## RESTful api

- RESTful api란 rest(Representational State Transfer, 웹을 위한 네트워크 기반 아키텍처 스타일)에 ful을 붙여 REST한 API 라는 뜻이다.

## REST의 6가지 원칙

### 1) Uniform Interface

- URI로 지정한 리소스에 대한 조작을 통일되고 한정적인 인터페이스로 수행하는 아키텍처 스타일을 말한다.

### 2) Stateless (무상태성)

- 클라이언트와 서버의 통신에는 상태가 없이 모든 요청은 필요한 모든 정보를 담고 있어야한다.
- 세션 정보나 쿠키정보를 별도로 저장하고 관리하지 않기 때문에 API 서버는 들어오는 요청만을 단순히 처리하면 된다.
- 때문에 서비스의 자유도가 높아지고 상태를 저장할 필요가 없으므로 규모확장성이 개선된다.

### 3) Caching

- REST는 HTTP라는 기존 웹표준을 그대로 사용하기 때문에, 웹에서 사용하는 기존 인프라를 그대로 활용이 가능하다.
- 따라서 HTTP가 가진 캐싱 기능이 적용 가능하다. HTTP 프로토콜 표준에서 사용하는 Last-Modified태그나 E-Tag를 이용하면 캐싱 구현이 가능하다.

### 4) Self-descriptiveness (자체 표현 구조)

수신자가 이해하기 위한 모든 정보를 가지고 있어야 한다. 즉, API 주소만 보고도 API를 이해할 수 있는 구조를 가져야한다.

### 5) Client-Server

- REST 서버는 API를 제공하고 클라이언트는 사용자 인증이나 컨텍스트(세션, 로그인 정보)등을 직접 관리하는 구조로 각각의 역할이 확실히 구분되기 때문에 클라이언트와 서버에서 개발해야 할 내용이 명확해지고 서로간 의존성이 줄어들게 된다.

### 6) Layered System (계층형 구조)

REST 서버는 다중 계층으로 구성될 수 있으며 보안, 로드 밸런싱, 암호화 계층을 추가해 구조상의 유연성을 둘 수 있고 PROXY, 게이트웨이 같은 네트워크 기반의 중간매체를 사용할 수 있게 한다.

## RESTful한 API를 디자인 할려면?

### 리소스와 행위를 명시적이고 직관적으로 분리한다.

- 리소스는 URI로 표현되는데 리소스가 가리키는 것은 명사로 표현되어야 한다.
- 행위는 HTTP Method로 표현하고, GET(조회), POST(생성), PUT(기존 entity 전체 수정), PATCH(기존 entity 일부 수정), DELETE(삭제)을 분명한 목적으로 사용한다.

### api의 버전을 관리한다.

- 환경은 항상 변하기 때문에 API 의 signature 가 변경될 수도 있음에 유의하자.
- 특정 API 를 변경할 때는 반드시 하위호환성을 보장해야 한다.

### 서버와 클라이언트가 같은 방식을 사용해서 요청하도록 한다.

- json으로 보내든, 둘 다 form-data 형식으로 보내든 하나로 통일한다.
- 다른 말로 표현하면 URI가 플랫폼 중립적이어야 한다.

## URI 설계시 주의할 점

### 슬래시 구분자(/)는 계층 관계를 나타내는 데 사용

```
    http://restapi.example.com/houses/apartments
    http://restapi.example.com/animals/mammals/whales
```

### URI 마지막 문자로 슬래시(/)를 포함하지 않는다

```
   http://restapi.example.com/houses/apartments/ (X)
   http://restapi.example.com/houses/apartments  (0)
```

### 하이픈(-)은 URI 가독성을 높이는데 사용

- URI를 쉽게 읽고 해석하기 위해, 불가피하게 긴 URI경로를 사용하게 된다면 하이픈을 사용해 가독성을 높일 수 있습니다.

```
   http://restapi.example.com/user-location/seoul
```

### 밑줄(\_)은 URI에 사용하지 않는다.

- 글꼴에 따라 다르긴 하지만 밑줄은 보기 어렵거나 밑줄 때문에 문자가 가려지기도 한다.
- 이런 문제를 피하기 위해 밑줄 대신 하이픈(-)을 사용하는 것이 좋습니다.(가독성)

### URI 경로에 대문자 사용은 피한다.

- 대소문자에 따라 다른 리소스로 인식하게 되기도 한다.
- RFC 3986(URI 문법 형식)은 URI 스키마와 호스트를 제외하고는 대소문자를 구별하도록 규정하고있다.

### 파일 확장자를 URI에 포함시키지 않는다.
